<!DOCTYPE html>
<div class  = "postBoard" style="width: 95%;">
	    <div id = "postsContainer" class="posts-container" style="width: 100%;">
	    <div id="posts">
	        <div class="post">
	            <p><strong><%= post.user.nickname %></strong></p>
		    <p><%= post.content %></p>

	            <% if (post.PostImages && post.PostImages.length > 0) { %>
	                <div class="image-container">
	                    <% post.PostImages.forEach(image => { %>
	                        <img src="/images/posts/<%= image.imagePath %>" alt="unknown">
	                    <% }); %>
	                </div>
	            <% } %>
		<% if (userId === post.userId) { %>
			<!--<button class="edit">Edit</button>-->
			<button class="delete" onclick="deletePost(<%= post.id %>)">Delete</button>
		<% } %>
		<% const date = new Date(post.updatedAt); %>
        	<% const year = date.getFullYear(); %>
	        <% const month = (1 + date.getMonth()).toString().padStart(2, '0'); %>
        	<% const day = date.getDate().toString().padStart(2, '0'); %>
	        <% const hour = date.getHours().toString().padStart(2, '0'); %>
        	<% const minute = date.getMinutes().toString().padStart(2, '0'); %>
	        <% const second = date.getSeconds().toString().padStart(2, '0'); %>
        	<% const ampm = hour >= 12 ? '오후' : '오전'; %>
        	<% const formattedDate = `${year}.${month}.${day}.${ampm} ${hour}:${minute}:${second}`; %>

	            <p>Created: <%= formattedDate %></p>
			</a>
	        </div>
		<form class="comment-form"  method ="POST" action="/comment/<%= post.id%>" style="padding: 0;">
			<textarea id="commentInput" name="comment" placeholder="댓글을  입력하세요." style="width: 100%;"></textarea>
			<button type="submit">저장</button>
		</form>
		<% comments.forEach(comment => { %>
		<div id="post" style="margin-top: 10px; padding: 5px; border-radius: 5px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);">
			<p><strong><%= comment.user.nickname %></strong></p>
			<p><%= comment.content %></p>
                                        <% const date = new Date(comment.createdAt); %>
                                        <% const year = date.getFullYear(); %>
                                        <% const month = (1 + date.getMonth()).toString().padStart(2, '0'); %>
                                        <% const day = date.getDate().toString().padStart(2, '0'); %>
                                        <% const hour = date.getHours().toString().padStart(2, '0'); %>
                                        <% const minute = date.getMinutes().toString().padStart(2, '0'); %>                                        <% const second = date.getSeconds().toString().padStart(2, '0'); %>                                        <% const ampm = hour >= 12 ? '오후' : '오전'; %>
                                        <% const formattedDate = `${year}.${month}.${day}.${ampm} ${hour}:${minute}:${second}`; %>
                        <small>Created: <%= formattedDate %></small>
                 </div>
                 <% }); %>
	    </div>

	</div>
</div>
        <script src="/public/js/commu.js"></script>
    
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/core.js"></script>
    <script src="js/lightbox-plus-jquery.min.js"></script>
